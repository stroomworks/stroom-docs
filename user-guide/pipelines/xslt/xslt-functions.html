
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>XSLT functions Â· Stroom</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../file-output.html" />
    
    
    <link rel="prev" href="xslt-includes.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">1. Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../../screenshots.html">
            
                <a href="../../../screenshots.html">
            
                    
                        <b>1.2.</b>
                    
                    Screenshots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../../quick-start-guide/quick-start.html">
            
                <a href="../../../quick-start-guide/quick-start.html">
            
                    
                        <b>1.3.</b>
                    
                    Quick-start guide
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">2. Installation</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../../install-guide/stroom-app-install.html">
            
                <a href="../../../install-guide/stroom-app-install.html">
            
                    
                        <b>2.1.</b>
                    
                    Installing Stroom
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                        <b>2.2.</b>
                    
                    Setup
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../../../install-guide/setup/apache-forwarding.html">
            
                <a href="../../../install-guide/setup/apache-forwarding.html">
            
                    
                        <b>2.2.1.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../../../install-guide/setup/java-key-store-setup.html">
            
                <a href="../../../install-guide/setup/java-key-store-setup.html">
            
                    
                        <b>2.2.2.</b>
                    
                    Java key store setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../../../install-guide/setup/mysql-server-setup.html">
            
                <a href="../../../install-guide/setup/mysql-server-setup.html">
            
                    
                        <b>2.2.3.</b>
                    
                    MySQL server setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../../../install-guide/setup/processing-user-setup.html">
            
                <a href="../../../install-guide/setup/processing-user-setup.html">
            
                    
                        <b>2.2.4.</b>
                    
                    Processing user setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../../../install-guide/setup/securing-stroom.html">
            
                <a href="../../../install-guide/setup/securing-stroom.html">
            
                    
                        <b>2.2.5.</b>
                    
                    Securing Stroom
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../../install-guide/upgrade-patch.html">
            
                <a href="../../../install-guide/upgrade-patch.html">
            
                    
                        <b>2.3.</b>
                    
                    Upgrading and patching
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">4. User Guide</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../nodes.html">
            
                <a href="../../nodes.html">
            
                    
                        <b>3.1.</b>
                    
                    Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../volumes.html">
            
                <a href="../../volumes.html">
            
                    
                        <b>3.2.</b>
                    
                    Volumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../tasks.html">
            
                <a href="../../tasks.html">
            
                    
                        <b>3.3.</b>
                    
                    Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../../feeds.html">
            
                <a href="../../feeds.html">
            
                    
                        <b>3.4.</b>
                    
                    Feeds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../../roles.html">
            
                <a href="../../roles.html">
            
                    
                        <b>3.5.</b>
                    
                    Roles and permissions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../../sending-data/">
            
                <a href="../../sending-data/">
            
                    
                        <b>3.6.</b>
                    
                    Sending data to Stroom
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="../../sending-data/header-arguments.html">
            
                <a href="../../sending-data/header-arguments.html">
            
                    
                        <b>3.6.1.</b>
                    
                    Header Arguments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="../../sending-data/payloads.html">
            
                <a href="../../sending-data/payloads.html">
            
                    
                        <b>3.6.2.</b>
                    
                    Payloads
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="../../sending-data/response-codes.html">
            
                <a href="../../sending-data/response-codes.html">
            
                    
                        <b>3.6.3.</b>
                    
                    Response codes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.4" data-path="../../sending-data/example-clients.html">
            
                <a href="../../sending-data/example-clients.html">
            
                    
                        <b>3.6.4.</b>
                    
                    Example clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.5" data-path="../../sending-data/java-keystores.html">
            
                <a href="../../sending-data/java-keystores.html">
            
                    
                        <b>3.6.5.</b>
                    
                    SSL Java keystores
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.6" data-path="../../sending-data/ssl.html">
            
                <a href="../../sending-data/ssl.html">
            
                    
                        <b>3.6.6.</b>
                    
                    SSL configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../">
            
                <a href="../">
            
                    
                        <b>3.7.</b>
                    
                    Pipelines
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../parser/">
            
                <a href="../parser/">
            
                    
                        <b>3.7.1.</b>
                    
                    Parser
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1.1" data-path="../parser/xml-fragments.html">
            
                <a href="../parser/xml-fragments.html">
            
                    
                        <b>3.7.1.1.</b>
                    
                    XML fragments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.1.2" data-path="../parser/context-data.html">
            
                <a href="../parser/context-data.html">
            
                    
                        <b>3.7.1.2.</b>
                    
                    Context data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="./">
            
                <a href="./">
            
                    
                        <b>3.7.2.</b>
                    
                    XSLT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.2.1" data-path="xslt-includes.html">
            
                <a href="xslt-includes.html">
            
                    
                        <b>3.7.2.1.</b>
                    
                    XSLT includes
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.7.2.2" data-path="xslt-functions.html">
            
                <a href="xslt-functions.html">
            
                    
                        <b>3.7.2.2.</b>
                    
                    XSLT functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.3" data-path="../file-output.html">
            
                <a href="../file-output.html">
            
                    
                        <b>3.7.3.</b>
                    
                    File output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../../dashboards/">
            
                <a href="../../dashboards/">
            
                    
                        <b>3.8.</b>
                    
                    Dashboards
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.1" data-path="../../dashboards/queries.html">
            
                <a href="../../dashboards/queries.html">
            
                    
                        <b>3.8.1.</b>
                    
                    Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.2" data-path="../../dashboards/dictionaries.html">
            
                <a href="../../dashboards/dictionaries.html">
            
                    
                        <b>3.8.2.</b>
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../../security.html">
            
                <a href="../../security.html">
            
                    
                        <b>3.9.</b>
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" >
            
                <span>
            
                    
                        <b>3.10.</b>
                    
                    Data splitter
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1" data-path="../../../datasplitter/1-0-introduction.html">
            
                <a href="../../../datasplitter/1-0-introduction.html">
            
                    
                        <b>3.10.1.</b>
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1.1" data-path="../../../datasplitter/1-1-simple-csv-example.html">
            
                <a href="../../../datasplitter/1-1-simple-csv-example.html">
            
                    
                        <b>3.10.1.1.</b>
                    
                    Simple CSV example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.2" data-path="../../../datasplitter/1-2-simple-csv-example-with-heading.html">
            
                <a href="../../../datasplitter/1-2-simple-csv-example-with-heading.html">
            
                    
                        <b>3.10.1.2.</b>
                    
                    Simple CSV example with heading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.3" data-path="../../../datasplitter/1-3-complex-example.html">
            
                <a href="../../../datasplitter/1-3-complex-example.html">
            
                    
                        <b>3.10.1.3.</b>
                    
                    Complex example with regex and user defined names
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.4" data-path="../../../datasplitter/1-4-multi-line-example.html">
            
                <a href="../../../datasplitter/1-4-multi-line-example.html">
            
                    
                        <b>3.10.1.4.</b>
                    
                    Multi-line example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.2" data-path="../../../datasplitter/2-0-element-reference.html">
            
                <a href="../../../datasplitter/2-0-element-reference.html">
            
                    
                        <b>3.10.2.</b>
                    
                    Element reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.2.1" data-path="../../../datasplitter/2-1-content-providers.html">
            
                <a href="../../../datasplitter/2-1-content-providers.html">
            
                    
                        <b>3.10.2.1.</b>
                    
                    Content providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.2" data-path="../../../datasplitter/2-2-expressions.html">
            
                <a href="../../../datasplitter/2-2-expressions.html">
            
                    
                        <b>3.10.2.2.</b>
                    
                    Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.3" data-path="../../../datasplitter/2-3-variables.html">
            
                <a href="../../../datasplitter/2-3-variables.html">
            
                    
                        <b>3.10.2.3.</b>
                    
                    Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.4" data-path="../../../datasplitter/2-4-output.html">
            
                <a href="../../../datasplitter/2-4-output.html">
            
                    
                        <b>3.10.2.4.</b>
                    
                    Output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.3" data-path="../../../datasplitter/3-0-match-references.html">
            
                <a href="../../../datasplitter/3-0-match-references.html">
            
                    
                        <b>3.10.3.</b>
                    
                    Match references, variables and fixed strings
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.3.1" data-path="../../../datasplitter/3-1-expression-match-references.html">
            
                <a href="../../../datasplitter/3-1-expression-match-references.html">
            
                    
                        <b>3.10.3.1.</b>
                    
                    Expression match references
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.2" data-path="../../../datasplitter/3-2-variable-reference.html">
            
                <a href="../../../datasplitter/3-2-variable-reference.html">
            
                    
                        <b>3.10.3.2.</b>
                    
                    Variable reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.3" data-path="../../../datasplitter/3-3-use-of-fixed-strings.html">
            
                <a href="../../../datasplitter/3-3-use-of-fixed-strings.html">
            
                    
                        <b>3.10.3.3.</b>
                    
                    Use of fixed strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.4" data-path="../../../datasplitter/3-4-concatenation-of-references.html">
            
                <a href="../../../datasplitter/3-4-concatenation-of-references.html">
            
                    
                        <b>3.10.3.4.</b>
                    
                    Concatenation of references
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">6. Stroom Proxy</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../../proxy/install.html">
            
                <a href="../../../proxy/install.html">
            
                    
                        <b>4.1.</b>
                    
                    Installing Stroom proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../../proxy/docker.html">
            
                <a href="../../../proxy/docker.html">
            
                    
                        <b>4.2.</b>
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../../../proxy/apache-forwarding.html">
            
                <a href="../../../proxy/apache-forwarding.html">
            
                    
                        <b>4.3.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">7. Developer Guide</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../../dev-guide/README.md">
            
                <span>
            
                    
                        <b>5.1.</b>
                    
                    Developer guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../../../dev-guide/releasing.html">
            
                <a href="../../../dev-guide/releasing.html">
            
                    
                        <b>5.1.1.</b>
                    
                    Releasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../../../dev-guide/stroom-in-an-ide.html">
            
                <a href="../../../dev-guide/stroom-in-an-ide.html">
            
                    
                        <b>5.1.2.</b>
                    
                    Running Stroom from IntelliJ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../../../dev-guide/docker.html">
            
                <a href="../../../dev-guide/docker.html">
            
                    
                        <b>5.1.3.</b>
                    
                    Running Stroom using Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="../../../dev-guide/gitbook.html">
            
                <a href="../../../dev-guide/gitbook.html">
            
                    
                        <b>5.1.4.</b>
                    
                    Building GitBook documentation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >XSLT functions</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="xslt-functions">XSLT Functions</h1>
<p>By including the following namespace:</p>
<pre><code class="lang-xml">xmlns:s=&quot;stroom&quot;
</code></pre>
<p>E.g.</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;xsl:stylesheet
    xmlns=&quot;event-logging:3&quot;
    xmlns:s=&quot;stroom&quot;
    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    version=&quot;2.0&quot;&gt;
</code></pre>
<p>The following functions are available to aid your translation:</p>
<ul>
<li><code>bitmap-lookup(String map, String key)</code> - Bitmap based look up against reference data map using the period start time</li>
<li><code>bitmap-lookup(String map, String key, String time)</code> - Bitmap based look up against reference data map using a specified time, e.g. the event time</li>
<li><code>bitmap-lookup(String map, String key, String time, Boolean ignoreWarnings)</code> - Bitmap based look up against reference data map using a specified time, e.g. the event time, and ignore any warnings generated by a failed lookup</li>
<li><code>classification()</code> - The classification of the feed for the data being processed</li>
<li><code>current-time()</code> - The current system time</li>
<li><code>current-user()</code> - The current user logged into Stroom (only relevant for interactive use, e.g. search)</li>
<li><code>dictionary(String name)</code> - Loads the contents of the named dictionary for use within the translation</li>
<li><code>feed-attribute(String attributeName)</code> - Lookup a given attribute supplied when the stream was sent to Stroom, e.g. feed-attribute(&apos;System&apos;).</li>
<li><code>feed-name()</code> - Name of the feed for the data being processed</li>
<li><code>format-date(String date, String pattern)</code> - Format a date that uses the specified pattern using the default time zone</li>
<li><code>format-date(String date, String pattern, String timeZone)</code> - Format a date that uses the specified pattern with the specified time zone</li>
<li><code>format-date(String date, String patternIn, String timeZoneIn, String patternOut, String timeZoneOut)</code> - Parse a date with the specified input pattern and time zone and format the output with the specified output pattern and time zone</li>
<li><code>format-date(String milliseconds)</code> - Format a date that is specified as a number of milliseconds since a standard base time known as &quot;the epoch&quot;, namely January 1, 1970, 00:00:00 GMT</li>
<li><code>get(String key)</code> - Returns the value associated with a key that has been stored using put()</li>
<li><code>json-to-xml(String json)</code> - Returns an XML representation of the supplied JSON value for use in XPath expressions</li>
<li><code>log(String severity, String message)</code> - Logs a message to the processing log with the specified severity</li>
<li><code>lookup(String map, String key)</code> - Look up a reference data map using the period start time</li>
<li><code>lookup(String map, String key, String time)</code> - Look up a reference data map using a specified time, e.g. the event time</li>
<li><code>lookup(String map, String key, String time, Boolean ignoreWarnings)</code> - Look up a reference data map using a specified time, e.g. the event time, and ignore any warnings generated by a failed lookup</li>
<li><code>numeric-ip(String ipAddress)</code> - Convert an IP address to a numeric representation for range comparison</li>
<li><code>random()</code> - Get a system generated random number between 0 and 1.</li>
<li><code>search-id()</code> - Get the id of the batch search when a pipeline is processing as part of a batch search</li>
<li><code>stream-id()</code> - Get the id of the current input stream that is being processed</li>
<li><code>hex-to-dec(String hex)</code> - Convert hex to dec representation</li>
<li><code>hex-to-oct(String hex)</code> - Convert hex to oct representation</li>
<li><code>pipeline-name()</code> - Name of the current processing pipeline using the XSLT</li>
<li><code>put(String key, String value)</code> - Store a value for use later on in the translation</li>
</ul>
<h2 id="dictionary"><code>dictionary()</code></h2>
<p>The dictionary() function gets the contents of the specified dictionary for use during translation.
 The main use for this function is to allow users to abstract the management of a set of keywords from
 the XSLT so that it is easier for some users to make quick alterations to a dictionary that is used
 by some XSLT, without the need for the user to understand the complexities of XSLT.</p>
<h2 id="format-date"><code>format-date()</code></h2>
<p>The format-date() function takes a Pattern and optional TimeZone arguments and replaces the parsed
contents with an XML standard Date Format. The pattern must be a Java based SimpleDateFormat.  If the
optional TimeZone argument is present the pattern must not include the time zone pattern tokens (z and Z).
A special time zone value of &quot;GMT/BST&quot; can be used to guess the time based on the date (BST during
British Summer Time).</p>
<p>E.g. Convert a GMT date time &quot;2009/12/01 12:34:11&quot;</p>
<pre><code class="lang-xml">    &lt;xsl:value-of select=&quot;s:format-date(&apos;2009/08/01 12:34:11&apos;, &apos;yyyy/MM/dd HH:mm:ss&apos;)&quot;/&gt;
</code></pre>
<p>E.g. Convert a GMT or BST date time &quot;2009/08/01 12:34:11&quot;</p>
<pre><code class="lang-xml">    &lt;xsl:value-of select=&quot;s:format-date(&apos;2009/08/01 12:34:11&apos;, &apos;yyyy/MM/dd HH:mm:ss&apos;, &apos;GMT/BST&apos;)&quot;/&gt;
</code></pre>
<p>E.g. Convert a GMT+1:00 date time &quot;2009/08/01 12:34:11&quot;</p>
<pre><code class="lang-xml">    &lt;xsl:value-of select=&quot;s:format-date(&apos;2009/08/01 12:34:11&apos;, &apos;yyyy/MM/dd HH:mm:ss&apos;, &apos;GMT+1:00&apos;)&quot;/&gt;
</code></pre>
<p>E.g. Convert a date time specified as milliseconds since the epoch &quot;1269270011640&quot;</p>
<pre><code class="lang-xml">    &lt;xsl:value-of select=&quot;s:format-date(&apos;1269270011640&apos;)&quot;/&gt;
</code></pre>
<p>Time Zone Must be as per the rules defined in SimpleDateFormat under General Time Zone syntax.</p>
<h2 id="lookup"><code>lookup()</code></h2>
<p>The lookup() function looks up from reference or context data a value (which can be an XML node set) and adds it
to the resultant XML.  If the look up fails no result will be returned. By testing the result a default value may be output if no result is returned.</p>
<p>E.g. Look up a SID given a PF</p>
<pre><code class="lang-xml">    &lt;xsl:variable name=&quot;pf&quot; select=&quot;PFNumber&quot;/&gt;
    &lt;xsl:if test=&quot;$pf&quot;&gt;
       &lt;xsl:variable name=&quot;sid&quot; select=&quot;s:lookup(&apos;PF_TO_SID&apos;, $pf, $formattedDateTime)&quot;/&gt;

       &lt;xsl:choose&gt;
          &lt;xsl:when test=&quot;$sid&quot;&gt;
             &lt;User&gt;
                 &lt;Id&gt;&lt;xsl:value-of select=&quot;$sid&quot;/&gt;&lt;/Id&gt;
             &lt;/User&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
             &lt;data name=&quot;PFNumber&quot;&gt;
                &lt;xsl:attribute name=&quot;Value&quot;&gt;&lt;xsl:value-of select=&quot;$pf&quot;/&gt;&lt;/xsl:attribute&gt;
             &lt;/data&gt;
          &lt;/xsl:otherwise&gt;
       &lt;/xsl:choose&gt;
    &lt;/xsl:if&gt;
</code></pre>
<h2 id="log"><code>log()</code></h2>
<p>The log() function writes a message to the processing log with the specified severity.
 Severities of INFO, WARN, ERROR and FATAL can be used.
 Severities of ERROR and FATAL will result in records being omitted from the output if a RecordOutputFilter is used in the pipeline.
 The counts for RecWarn, RecError will be affected by warnings or errors generated in this way therefore this function is useful for adding business rules to XML output.</p>
<p>E.g. Warn if a SID is not the correct length.</p>
<pre><code class="lang-xml">    &lt;xsl:if test=&quot;string-length($sid) != 7&quot;&gt;
      &lt;xsl:value-of select=&quot;s:log(&apos;WARN&apos;, concat($sid, &apos; is not the correct length&apos;))&quot;/&gt;
    &lt;/xsl:if&gt;
</code></pre>
<h2 id="put-and-get"><code>put()</code> and <code>get()</code></h2>
<p>You can put values into a map using the put() function. These values can then be retrieved
later using the get() function. Values are stored against a key name so that multiple values
can be stored. These functions can be used for many purposes but are most commonly used to
count a number of records that meet certain criteria.</p>
<p>An example of how to count records is shown below:</p>
<pre><code class="lang-xml">    &lt;!-- Get the current record count --&gt;
    &lt;xsl:variable name=&quot;currentCount&quot; select=&quot;number(s:get(&apos;count&apos;))&quot; /&gt;

    &lt;!-- Increment the record count --&gt;
    &lt;xsl:variable name=&quot;count&quot;&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test=&quot;$currentCount&quot;&gt;
          &lt;xsl:value-of select=&quot;$currentCount + 1&quot; /&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:value-of select=&quot;1&quot; /&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:variable&gt;

    &lt;!-- Store the count for future retrieval --&gt;
    &lt;xsl:value-of select=&quot;s:put(&apos;count&apos;, $count)&quot; /&gt;

    &lt;!-- Output the new count --&gt;
    &lt;data name=&quot;Count&quot;&gt;
      &lt;xsl:attribute name=&quot;Value&quot; select=&quot;$count&quot; /&gt;
    &lt;/data&gt;
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="xslt-includes.html" class="navigation navigation-prev " aria-label="Previous page: XSLT includes">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../file-output.html" class="navigation navigation-next " aria-label="Next page: File output">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"XSLT functions","level":"3.7.2.2","depth":3,"next":{"title":"File output","level":"3.7.3","depth":2,"path":"user-guide/pipelines/file-output.md","ref":"user-guide/pipelines/file-output.md","articles":[]},"previous":{"title":"XSLT includes","level":"3.7.2.1","depth":3,"path":"user-guide/pipelines/xslt/xslt-includes.md","ref":"user-guide/pipelines/xslt/xslt-includes.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-highlight","github","anchorjs"],"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/gchq/stroom-docs"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchorjs":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Stroom","gitbook":"3.x.x"},"file":{"path":"user-guide/pipelines/xslt/xslt-functions.md","mtime":"2017-01-24T07:03:14.457Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-02-03T08:17:49.859Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

