
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Variable reference Â· Stroom</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="3-3-use-of-fixed-strings.html" />
    
    
    <link rel="prev" href="3-1-expression-match-references.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">1. Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../screenshots.html">
            
                <a href="../screenshots.html">
            
                    
                        <b>1.2.</b>
                    
                    Screenshots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../quick-start-guide/quick-start.html">
            
                <a href="../quick-start-guide/quick-start.html">
            
                    
                        <b>1.3.</b>
                    
                    Quick-start guide
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">2. Installation</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../install-guide/stroom-app-install.html">
            
                <a href="../install-guide/stroom-app-install.html">
            
                    
                        <b>2.1.</b>
                    
                    Installing Stroom
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                        <b>2.2.</b>
                    
                    Setup
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../install-guide/setup/apache-forwarding.html">
            
                <a href="../install-guide/setup/apache-forwarding.html">
            
                    
                        <b>2.2.1.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../install-guide/setup/java-key-store-setup.html">
            
                <a href="../install-guide/setup/java-key-store-setup.html">
            
                    
                        <b>2.2.2.</b>
                    
                    Java key store setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../install-guide/setup/mysql-server-setup.html">
            
                <a href="../install-guide/setup/mysql-server-setup.html">
            
                    
                        <b>2.2.3.</b>
                    
                    MySQL server setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../install-guide/setup/processing-user-setup.html">
            
                <a href="../install-guide/setup/processing-user-setup.html">
            
                    
                        <b>2.2.4.</b>
                    
                    Processing user setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../install-guide/setup/securing-stroom.html">
            
                <a href="../install-guide/setup/securing-stroom.html">
            
                    
                        <b>2.2.5.</b>
                    
                    Securing Stroom
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../install-guide/upgrade-patch.html">
            
                <a href="../install-guide/upgrade-patch.html">
            
                    
                        <b>2.3.</b>
                    
                    Upgrading and patching
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">4. User Guide</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../user-guide/nodes.html">
            
                <a href="../user-guide/nodes.html">
            
                    
                        <b>3.1.</b>
                    
                    Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../user-guide/volumes.html">
            
                <a href="../user-guide/volumes.html">
            
                    
                        <b>3.2.</b>
                    
                    Volumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../user-guide/tasks.html">
            
                <a href="../user-guide/tasks.html">
            
                    
                        <b>3.3.</b>
                    
                    Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../user-guide/feeds.html">
            
                <a href="../user-guide/feeds.html">
            
                    
                        <b>3.4.</b>
                    
                    Feeds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../user-guide/roles.html">
            
                <a href="../user-guide/roles.html">
            
                    
                        <b>3.5.</b>
                    
                    Roles and permissions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../user-guide/sending-data/">
            
                <a href="../user-guide/sending-data/">
            
                    
                        <b>3.6.</b>
                    
                    Sending data to Stroom
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="../user-guide/sending-data/header-arguments.html">
            
                <a href="../user-guide/sending-data/header-arguments.html">
            
                    
                        <b>3.6.1.</b>
                    
                    Header Arguments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="../user-guide/sending-data/payloads.html">
            
                <a href="../user-guide/sending-data/payloads.html">
            
                    
                        <b>3.6.2.</b>
                    
                    Payloads
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="../user-guide/sending-data/response-codes.html">
            
                <a href="../user-guide/sending-data/response-codes.html">
            
                    
                        <b>3.6.3.</b>
                    
                    Response codes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.4" data-path="../user-guide/sending-data/example-clients.html">
            
                <a href="../user-guide/sending-data/example-clients.html">
            
                    
                        <b>3.6.4.</b>
                    
                    Example clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.5" data-path="../user-guide/sending-data/java-keystores.html">
            
                <a href="../user-guide/sending-data/java-keystores.html">
            
                    
                        <b>3.6.5.</b>
                    
                    SSL Java keystores
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.6" data-path="../user-guide/sending-data/ssl.html">
            
                <a href="../user-guide/sending-data/ssl.html">
            
                    
                        <b>3.6.6.</b>
                    
                    SSL configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../user-guide/pipelines/">
            
                <a href="../user-guide/pipelines/">
            
                    
                        <b>3.7.</b>
                    
                    Pipelines
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../user-guide/pipelines/parser/">
            
                <a href="../user-guide/pipelines/parser/">
            
                    
                        <b>3.7.1.</b>
                    
                    Parser
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1.1" data-path="../user-guide/pipelines/parser/xml-fragments.html">
            
                <a href="../user-guide/pipelines/parser/xml-fragments.html">
            
                    
                        <b>3.7.1.1.</b>
                    
                    XML fragments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.1.2" data-path="../user-guide/pipelines/parser/context-data.html">
            
                <a href="../user-guide/pipelines/parser/context-data.html">
            
                    
                        <b>3.7.1.2.</b>
                    
                    Context data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="../user-guide/pipelines/xslt/">
            
                <a href="../user-guide/pipelines/xslt/">
            
                    
                        <b>3.7.2.</b>
                    
                    XSLT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.2.1" data-path="../user-guide/pipelines/xslt/xslt-includes.html">
            
                <a href="../user-guide/pipelines/xslt/xslt-includes.html">
            
                    
                        <b>3.7.2.1.</b>
                    
                    XSLT includes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.2.2" data-path="../user-guide/pipelines/xslt/xslt-functions.html">
            
                <a href="../user-guide/pipelines/xslt/xslt-functions.html">
            
                    
                        <b>3.7.2.2.</b>
                    
                    XSLT functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.3" data-path="../user-guide/pipelines/file-output.html">
            
                <a href="../user-guide/pipelines/file-output.html">
            
                    
                        <b>3.7.3.</b>
                    
                    File output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../user-guide/dashboards/">
            
                <a href="../user-guide/dashboards/">
            
                    
                        <b>3.8.</b>
                    
                    Dashboards
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.1" data-path="../user-guide/dashboards/queries.html">
            
                <a href="../user-guide/dashboards/queries.html">
            
                    
                        <b>3.8.1.</b>
                    
                    Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.2" data-path="../user-guide/dashboards/dictionaries.html">
            
                <a href="../user-guide/dashboards/dictionaries.html">
            
                    
                        <b>3.8.2.</b>
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../user-guide/security.html">
            
                <a href="../user-guide/security.html">
            
                    
                        <b>3.9.</b>
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" >
            
                <span>
            
                    
                        <b>3.10.</b>
                    
                    Data splitter
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1" data-path="1-0-introduction.html">
            
                <a href="1-0-introduction.html">
            
                    
                        <b>3.10.1.</b>
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1.1" data-path="1-1-simple-csv-example.html">
            
                <a href="1-1-simple-csv-example.html">
            
                    
                        <b>3.10.1.1.</b>
                    
                    Simple CSV example
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.2" data-path="1-2-simple-csv-example-with-heading.html">
            
                <a href="1-2-simple-csv-example-with-heading.html">
            
                    
                        <b>3.10.1.2.</b>
                    
                    Simple CSV example with heading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.3" data-path="1-3-complex-example.html">
            
                <a href="1-3-complex-example.html">
            
                    
                        <b>3.10.1.3.</b>
                    
                    Complex example with regex and user defined names
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.1.4" data-path="1-4-multi-line-example.html">
            
                <a href="1-4-multi-line-example.html">
            
                    
                        <b>3.10.1.4.</b>
                    
                    Multi-line example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.2" data-path="2-0-element-reference.html">
            
                <a href="2-0-element-reference.html">
            
                    
                        <b>3.10.2.</b>
                    
                    Element reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.2.1" data-path="2-1-content-providers.html">
            
                <a href="2-1-content-providers.html">
            
                    
                        <b>3.10.2.1.</b>
                    
                    Content providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.2" data-path="2-2-expressions.html">
            
                <a href="2-2-expressions.html">
            
                    
                        <b>3.10.2.2.</b>
                    
                    Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.3" data-path="2-3-variables.html">
            
                <a href="2-3-variables.html">
            
                    
                        <b>3.10.2.3.</b>
                    
                    Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2.4" data-path="2-4-output.html">
            
                <a href="2-4-output.html">
            
                    
                        <b>3.10.2.4.</b>
                    
                    Output
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10.3" data-path="3-0-match-references.html">
            
                <a href="3-0-match-references.html">
            
                    
                        <b>3.10.3.</b>
                    
                    Match references, variables and fixed strings
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.3.1" data-path="3-1-expression-match-references.html">
            
                <a href="3-1-expression-match-references.html">
            
                    
                        <b>3.10.3.1.</b>
                    
                    Expression match references
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.10.3.2" data-path="3-2-variable-reference.html">
            
                <a href="3-2-variable-reference.html">
            
                    
                        <b>3.10.3.2.</b>
                    
                    Variable reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.3" data-path="3-3-use-of-fixed-strings.html">
            
                <a href="3-3-use-of-fixed-strings.html">
            
                    
                        <b>3.10.3.3.</b>
                    
                    Use of fixed strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3.4" data-path="3-4-concatenation-of-references.html">
            
                <a href="3-4-concatenation-of-references.html">
            
                    
                        <b>3.10.3.4.</b>
                    
                    Concatenation of references
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">6. Stroom Proxy</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../proxy/install.html">
            
                <a href="../proxy/install.html">
            
                    
                        <b>4.1.</b>
                    
                    Installing Stroom proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../proxy/docker.html">
            
                <a href="../proxy/docker.html">
            
                    
                        <b>4.2.</b>
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../proxy/apache-forwarding.html">
            
                <a href="../proxy/apache-forwarding.html">
            
                    
                        <b>4.3.</b>
                    
                    Apache forwarding
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">7. Developer Guide</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../dev-guide/README.md">
            
                <span>
            
                    
                        <b>5.1.</b>
                    
                    Developer guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../dev-guide/releasing.html">
            
                <a href="../dev-guide/releasing.html">
            
                    
                        <b>5.1.1.</b>
                    
                    Releasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../dev-guide/stroom-in-an-ide.html">
            
                <a href="../dev-guide/stroom-in-an-ide.html">
            
                    
                        <b>5.1.2.</b>
                    
                    Running Stroom from IntelliJ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../dev-guide/docker.html">
            
                <a href="../dev-guide/docker.html">
            
                    
                        <b>5.1.3.</b>
                    
                    Running Stroom using Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="../dev-guide/gitbook.html">
            
                <a href="../dev-guide/gitbook.html">
            
                    
                        <b>5.1.4.</b>
                    
                    Building GitBook documentation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Variable reference</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="variable-reference">Variable reference</h1>
<p>Variables are added to Data Splitter configuration using the <code>&lt;var&gt;</code> element, see <a href="2-3-variables.html">variables</a>. Each variable must have a unique id so that it can be referenced. References to variables have the form <code>$VARIABLE_ID$</code>, e.g.</p>
<pre><code class="lang-xml">&lt;data name=&quot;$heading$&quot; value=&quot;$&quot; /&gt;
</code></pre>
<h2 id="identification"><a id="sec_3_2_1"></a>Identification</h2>
<p>Data Splitter validates the configuration on load and ensures that all element ids are unique and that referenced ids belong to a variable.</p>
<p>A variable will only store data if it is referenced so variables that are not referenced will do nothing. In addition to this a variable will only store data for match groups that are referenced, e.g. if <code>$heading$1</code> is the only reference to a variable with an id of &#x2018;heading&#x2019; then only data for match group 1 will be stored for reference lookup.</p>
<h2 id="scopes"><a id="sec_3_2_2"></a>Scopes</h2>
<p>Variables have two scopes which affect how data is retrieved when referenced:</p>
<ul>
<li><a href="#sec_3_2_2_1">Local scope</a></li>
<li><a href="#sec_3_2_2_2">Remote scope</a></li>
</ul>
<h3 id="local-scope"><a id="sec_3_2_2_1"></a>Local Scope</h3>
<p>Variables are local to a reference if the reference exists as a descendant of the variables parent expression, e.g.</p>
<pre><code class="lang-xml">&lt;split delimiter=&quot;\n&quot; &gt;
  &lt;var id=&quot;line&quot; /&gt;

  &lt;group value=&quot;$1&quot;&gt;
    &lt;regex pattern=&quot;ip=([^ ]+) user=([^ ]+)&quot;&gt;
      &lt;data name=&quot;line&quot; value=&quot;$line$&quot;/&gt;
      &lt;data name=&quot;ip&quot; value=&quot;$1&quot;/&gt;
      &lt;data name=&quot;user&quot; value=&quot;$2&quot;/&gt;
    &lt;/regex&gt;
  &lt;/group&gt;
&lt;/split&gt;
</code></pre>
<p>In the above example, matches for the outermost <code>&lt;split&gt;</code> expression are stored in the variable with the id of <code>line</code>. The only reference to this variable is in a data element that is a descendant of the variables parent expression <code>&lt;split&gt;</code>, i.e. it is nested within split/group/regex.</p>
<p>Because the variable is referenced locally only the most recent parent match is relevant, i.e. no retrieval of values by 
<a href="#sec_3_2_2_2_1">iteration</a>, <a href="#sec_3_2_2_2_2">iteration offset</a> or <a href="#sec_3_2_2_2_3">fixed position</a> is applicable. These features only apply to remote variables that store multiple values.</p>
<h3 id="remote-scope"><a id="sec_3_2_2_2"></a>Remote Scope</h3>
<p>The <a href="1-2-simple-csv-example-with-heading.html">CSV example with a heading</a> is an example of a variable being referenced from a remote scope.</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;dataSplitter xmlns=&quot;data-splitter:3&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;data-splitter:3 file://data-splitter-v3.0.xsd&quot; version=&quot;3.0&quot;&gt;

  &lt;!-- Match heading line (note that maxMatch=&quot;1&quot; means that only the first line will be matched by this splitter) --&gt;
  &lt;split delimiter=&quot;\n&quot; maxMatch=&quot;1&quot;&gt;

    &lt;!-- Store each heading in a named list --&gt;
    &lt;group&gt;
      &lt;split delimiter=&quot;,&quot;&gt;
        &lt;var id=&quot;heading&quot; /&gt;
      &lt;/split&gt;
    &lt;/group&gt;
  &lt;/split&gt;

  &lt;!-- Match each record --&gt;
  &lt;split delimiter=&quot;\n&quot;&gt;

    &lt;!-- Take the matched line --&gt;
    &lt;group value=&quot;$1&quot;&gt;

      &lt;!-- Split the line up --&gt;
      &lt;split delimiter=&quot;,&quot;&gt;

        &lt;!-- Output the stored heading for each iteration and the value from group 1 --&gt;
        &lt;data name=&quot;$heading$1&quot; value=&quot;$1&quot; /&gt;
      &lt;/split&gt;
    &lt;/group&gt;
  &lt;/split&gt;
&lt;/dataSplitter&gt;
</code></pre>
<p>In the above example the parent expression of the variable is not the ancestor of the reference in the <code>&lt;data&gt;</code> element. This makes the <code>&lt;data&gt;</code> elements reference to the variable a remote one. In this situation the variable knows that it must store multiple values as the remote reference <code>&lt;data&gt;</code> may retrieve one of many values from the variable based on:</p>
<ol>
<li>The match count of the parent expression.</li>
<li>The match count of the parent expression, plus or minus an offset.</li>
<li>A fixed position in the variable store.</li>
</ol>
<h4 id="retrieval-of-value-by-iteration"><a id="sec_3_2_2_2_1"></a>Retrieval of value by iteration</h4>
<p>In the above example the first line is taken then repeatedly matched by delimiting with commas. This results in multiple values being stored in the &#x2018;heading&#x2019; variable. Once this is done subsequent lines are matched and then also repeatedly matched by delimiting with commas in the same way the heading is.</p>
<p>Each time a line is matched the internal match count of all sub expressions, (e.g. the <code>&lt;split&gt;</code> expression that is delimited by comma) is reset to 0. Every time the sub <code>&lt;split&gt;</code> expression matches up to a comma delimiter the match count is incremented. Any references to remote variables will, by default, use the current match count as an index to retrieve one of the many values stored in the variable. This means that the <code>&lt;data&gt;</code> element in the above example will retrieve the corresponding heading for each value as the match count of the values will match the storage position of each heading.</p>
<h4 id="retrieval-of-value-by-iteration-offset"><a id="sec_3_2_2_2_2"></a>Retrieval of value by iteration offset</h4>
<p>In some cases there may be a mismatch between the position where a value is stored in a variable and the match count applicable when remotely referencing the variable.</p>
<p>Take the following input:</p>
<pre><code>BAD,Date,Time,IPAddress,HostName,User,EventType,Detail
01/01/2010,00:00:00,192.168.1.100,SOMEHOST.SOMEWHERE.COM,user1,logon,
</code></pre><p>In the above example we can see that the first heading &#x2018;BAD&#x2019; is not correct for the first value of every line. In this situation we could either adjust the way the heading line is parsed to ignore &#x2018;BAD&#x2019; or just adjust the way the heading variable is referenced.</p>
<p>To make this adjustment the reference just needs to be told what offset to apply to the current match count to correctly retrieve the stored value. In the above example this would be done like this:</p>
<pre><code class="lang-xml">&lt;data name=&quot;$heading$1[+1]&quot; value=&quot;$1&quot; /&gt;
</code></pre>
<p>The above reference just uses the match count plus 1 to retrieve the stored value. Any integral offset plus or minus may be used, e.g. [+4] or [-10]. Offsets that result in a position that is outside of the storage range for the variable will not return a value.</p>
<h4 id="retrieval-of-value-by-fixed-position"><a id="sec_3_2_2_2_3"></a>Retrieval of value by fixed position</h4>
<p>In addition to retrieval by offset from the current match count, a stored value can be returned by a fixed position that has no relevance to the current match count.</p>
<p>In the following example the value retrieved from the &#x2018;heading&#x2019; variable will always be &#x2018;IPAddress&#x2019; as this is the fourth value stored in the &#x2018;heading&#x2019; variable and the position index starts at 0.</p>
<pre><code class="lang-xml">&lt;data name=&quot;$heading$1[3]&quot; value=&quot;$1&quot; /&gt;
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="3-1-expression-match-references.html" class="navigation navigation-prev " aria-label="Previous page: Expression match references">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="3-3-use-of-fixed-strings.html" class="navigation navigation-next " aria-label="Next page: Use of fixed strings">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Variable reference","level":"3.10.3.2","depth":3,"next":{"title":"Use of fixed strings","level":"3.10.3.3","depth":3,"path":"datasplitter/3-3-use-of-fixed-strings.md","ref":"datasplitter/3-3-use-of-fixed-strings.md","articles":[]},"previous":{"title":"Expression match references","level":"3.10.3.1","depth":3,"path":"datasplitter/3-1-expression-match-references.md","ref":"datasplitter/3-1-expression-match-references.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-highlight","github","anchorjs"],"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/gchq/stroom-docs"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchorjs":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Stroom","gitbook":"3.x.x"},"file":{"path":"datasplitter/3-2-variable-reference.md","mtime":"2017-01-24T07:03:14.397Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-02-03T08:17:49.859Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

